@page "/"

<h3>Book Catalog</h3>

<PageTitle>Book Catalog</PageTitle>

@page "/table"

<input type="text" @bind="searchTerm" placeholder="Search" />
<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Age</th>
            <th>Occupation</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var book in FilteredBooks)
        {
            <tr>
                <td>@book.Name</td>
                <td>@book.Age</td>
                <td>@book.Occupation</td>
            </tr>
        }
    </tbody>
</table>

@code {
    private string searchTerm = "";
    private List<Book> books = new List<Book>
    {
        new Book { Name = "John Doe", Age = 30, Occupation = "Engineer" },
        new Book { Name = "Jane Smith", Age = 25, Occupation = "Designer" },
        // Add more sample data here
    };

    private List<Book> FilteredBooks => string.IsNullOrWhiteSpace(searchTerm)
        ? books
        : books.Where(p => p.Name.Contains(searchTerm, StringComparison.OrdinalIgnoreCase)
                          || p.Occupation.Contains(searchTerm, StringComparison.OrdinalIgnoreCase))
                 .ToList();

    private class Book
    {
        public string Name { get; set; }
        public int Age { get; set; }
        public string Occupation { get; set; }
    }

    // Define searchTerm as a public property
    [Parameter]
    public string SearchTerm
    {
        get => searchTerm;
        set
        {
            searchTerm = value;
            StateHasChanged(); // Trigger re-render when the searchTerm changes
        }
    }
}
